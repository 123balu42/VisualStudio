<local:GenericPullRequestDetailView x:Class="GitHub.VisualStudio.UI.Views.PullRequestDetailView"
                                    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
                                    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
                                    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
                                    xmlns:cache="clr-namespace:GitHub.VisualStudio.Helpers"
                                    xmlns:local="clr-namespace:GitHub.VisualStudio.UI.Views"
                                    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
                                    xmlns:sampleData="clr-namespace:GitHub.SampleData;assembly=GitHub.App"
                                    xmlns:ui="clr-namespace:GitHub.UI;assembly=GitHub.UI"
                                    Background="{DynamicResource GitHubVsToolWindowBackground}"
                                    DataContext="{Binding ViewModel}"
                                    d:DesignHeight="300"
                                    d:DesignWidth="300"
                                    mc:Ignorable="d">
    <d:DesignProperties.DataContext>
        <Binding>
            <Binding.Source>
                <sampleData:PullRequestDetailViewModelDesigner />
            </Binding.Source>
        </Binding>
    </d:DesignProperties.DataContext>

    <UserControl.Resources>
        <ResourceDictionary>
            <ResourceDictionary.MergedDictionaries>
                <cache:SharedDictionaryManager Source="pack://application:,,,/GitHub.VisualStudio.UI;component/SharedDictionary.xaml" />
                <cache:SharedDictionaryManager Source="pack://application:,,,/GitHub.UI;component/SharedDictionary.xaml" />
            </ResourceDictionary.MergedDictionaries>
            <Style x:Key="DocumentStyle" TargetType="FlowDocument">
                <Setter Property="FontFamily" Value="Segoe UI"/>
                <Setter Property="FontSize" Value="12"/>
                <Setter Property="TextAlignment" Value="Left"/>
                <Setter Property="PagePadding" Value="0"/>
            </Style>
        </ResourceDictionary>
    </UserControl.Resources>

    <Grid Margin="4">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
        </Grid.RowDefinitions>

        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="Auto"/>
            <ColumnDefinition Width="*"/>
        </Grid.ColumnDefinitions>

        <Grid Grid.RowSpan="2" Grid.Column="0" Margin="0 0 10 0">
            <Grid.OpacityMask>
                <VisualBrush Visual="{Binding ElementName=avatarMask}"/>
            </Grid.OpacityMask>
            <Border Name="avatarMask" Background="White" CornerRadius="3" />
            <Image x:Name="avatar"
                   Width="48"
                   Height="48"
                   RenderOptions.BitmapScalingMode="HighQuality"
                   Source="{Binding Author.Avatar}" />
        </Grid>

        <TextBlock Grid.Row="0" 
                   Grid.Column="1"
                   Text="{Binding Title}"
                   FontSize="16"
                   TextTrimming="CharacterEllipsis"/>

        <Button Grid.Column="1"
                Grid.Row="1"
                Command="{Binding OpenOnGitHub}"
                Content="{Binding Number}"
                FontFamily="Segoe UI"
                HorizontalAlignment="Left"
                Style="{StaticResource HashtagActionLink}" />

        <ui:MarkdownViewer Grid.Row="2"
                           Grid.ColumnSpan="2"
                           Margin="0 16"
                           DocumentStyle="{StaticResource DocumentStyle}"
                           RawContent="{Binding Body}"
                           ScrollViewer.VerticalScrollBarVisibility="Auto"/>
    </Grid>
</local:GenericPullRequestDetailView>
